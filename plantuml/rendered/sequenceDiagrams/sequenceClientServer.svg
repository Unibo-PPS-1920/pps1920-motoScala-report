<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="778px" preserveAspectRatio="none" style="width:447px;height:778px;" version="1.1" viewBox="0 0 447 778" width="447px" zoomAndPan="magnify"><defs><filter height="300%" id="f1lb68gncu72dp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="147.3359" style="stroke: #000000; stroke-width: 2.0;" width="333" x="55" y="533.9922"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="333" x="55" y="637.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="71" y1="38.2969" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="71" x2="71" y1="348.6563" y2="389.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="71" x2="71" y1="389.4609" y2="729.4609"/><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="302.3594" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="66" y="46.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="66" y1="46.2969" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="76" y1="46.2969" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="76" y1="46.2969" y2="46.2969"/><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="340" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="66" y="389.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="66" y1="389.4609" y2="729.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="76" y1="389.4609" y2="729.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="66" x2="76" y1="729.4609" y2="729.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224" x2="224" y1="38.2969" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="224" x2="224" y1="348.6563" y2="389.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="224" x2="224" y1="389.4609" y2="729.4609"/><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="302.3594" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="219" y="46.2969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="219" x2="219" y1="46.2969" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="229" y1="46.2969" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="219" x2="229" y1="46.2969" y2="46.2969"/><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="340" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="219" y="389.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="219" x2="219" y1="389.4609" y2="729.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="229" y1="389.4609" y2="729.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="219" x2="229" y1="729.4609" y2="729.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="402.5" y1="128.5625" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="402.5" x2="402.5" y1="348.6563" y2="389.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="402.5" x2="402.5" y1="389.4609" y2="729.4609"/><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="198.9609" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="397.5" y="149.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="397.5" x2="397.5" y1="149.6953" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="407.5" x2="407.5" y1="149.6953" y2="348.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="397.5" x2="407.5" y1="149.6953" y2="149.6953"/><rect fill="#FFFFFF" filter="url(#f1lb68gncu72dp)" height="21.1328" style="stroke: #FFFFFF; stroke-width: 1.0;" width="10" x="397.5" y="389.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="397.5" x2="397.5" y1="389.4609" y2="410.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="407.5" x2="407.5" y1="389.4609" y2="410.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="397.5" x2="407.5" y1="410.5938" y2="410.5938"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="393.5" x2="411.5" y1="401.5938" y2="419.5938"/><line style="stroke: #A80036; stroke-width: 2.0;" x1="393.5" x2="411.5" y1="419.5938" y2="401.5938"/><rect fill="#FEFECE" filter="url(#f1lb68gncu72dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="40.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="47.5" y="22.9951">Client</text><rect fill="#FEFECE" filter="url(#f1lb68gncu72dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="191.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="198.5" y="22.9951">Server</text><rect fill="#FEFECE" filter="url(#f1lb68gncu72dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="40.5" y="729.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="47.5" y="749.4561">Client</text><rect fill="#FEFECE" filter="url(#f1lb68gncu72dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="61" x="191.5" y="729.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="47" x="198.5" y="749.4561">Server</text><rect fill="#FEFECE" filter="url(#f1lb68gncu72dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="373" y="729.4609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="380" y="749.4561">lobby</text><path d="M136,51.2969 L136,76.2969 L308,76.2969 L308,61.2969 L298,51.2969 L136,51.2969 " fill="#FBFB77" filter="url(#f1lb68gncu72dp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M298,51.2969 L298,61.2969 L308,61.2969 L298,51.2969 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="142" y="68.3638">Server create the lobby</text><rect fill="#EEEEEE" filter="url(#f1lb68gncu72dp)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="429" x="3" y="105.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="432" y1="105.9961" y2="105.9961"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="432" y1="108.9961" y2="108.9961"/><rect fill="#EEEEEE" filter="url(#f1lb68gncu72dp)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="190" x="122.5" y="95.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="171" x="128.5" y="111.4966">Server wait for clients</text><rect fill="#FEFECE" filter="url(#f1lb68gncu72dp)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="55" x="368" y="128.5625"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="41" x="375" y="148.5576">lobby</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="356" y1="149.6953" y2="145.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="366" x2="356" y1="149.6953" y2="153.6953"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="367" y1="149.6953" y2="149.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="236" y="144.6294">&lt;&lt;create lobby&gt;&gt;</text><path d="M8,168.8594 L8,193.8594 L130,193.8594 L130,178.8594 L120,168.8594 L8,168.8594 " fill="#FBFB77" filter="url(#f1lb68gncu72dp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M120,168.8594 L120,178.8594 L130,178.8594 L120,168.8594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="14" y="185.9263">Client join lobby</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="207" y1="224.125" y2="220.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="207" y1="224.125" y2="228.125"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="218" y1="224.125" y2="224.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="23" x="83" y="219.0591">Join</text><polygon fill="#A80036" points="385.5,249.2578,395.5,253.2578,385.5,257.2578,389.5,253.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="391.5" y1="253.2578" y2="253.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="105" x="236" y="248.1919">AddClient(client)</text><polygon fill="#A80036" points="240,278.3906,230,282.3906,240,286.3906,236,282.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234" x2="396.5" y1="282.3906" y2="282.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="29" x="246" y="277.3247">True</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="311.5234" y2="307.5234"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="311.5234" y2="315.5234"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="76" x2="218" y1="311.5234" y2="311.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="93" y="306.4575">JoinAck</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="207" y1="340.6563" y2="336.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="207" y1="340.6563" y2="344.6563"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="218" y1="340.6563" y2="340.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="41" x="83" y="335.5903">Ready</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="162" x="155.75" y="372.8667">After all client join the lobby</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="395.5" x2="385.5" y1="410.5938" y2="406.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="395.5" x2="385.5" y1="410.5938" y2="414.5938"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="396.5" y1="410.5938" y2="410.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="236" y="405.5278">Destory</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="439.7266" y2="435.7266"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="439.7266" y2="443.7266"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="76" x2="218" y1="439.7266" y2="439.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="93" y="434.6606">GameStart</text><path d="M37.5,452.7266 L37.5,477.7266 L253.5,477.7266 L253.5,462.7266 L243.5,452.7266 L37.5,452.7266 " fill="#FBFB77" filter="url(#f1lb68gncu72dp)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M243.5,452.7266 L243.5,462.7266 L253.5,462.7266 L243.5,452.7266 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="43.5" y="469.7935">Now game starts for all clients</text><rect fill="#EEEEEE" filter="url(#f1lb68gncu72dp)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="429" x="3" y="507.4258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="432" y1="507.4258" y2="507.4258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="432" y1="510.4258" y2="510.4258"/><rect fill="#EEEEEE" filter="url(#f1lb68gncu72dp)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="115" x="160" y="496.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="166" y="512.9263">Game starts</text><path d="M55,533.9922 L133,533.9922 L133,540.9922 L123,550.9922 L55,550.9922 L55,533.9922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="147.3359" style="stroke: #000000; stroke-width: 2.0;" width="333" x="55" y="533.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="70" y="547.0591">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="84" x="148" y="546.2026">[Server side]</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="55" x2="388" y1="638.3906" y2="638.3906"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="81" x="60" y="648.6011">[Client side]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="229" x2="271" y1="577.2578" y2="577.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="271" x2="271" y1="577.2578" y2="590.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="230" x2="271" y1="590.2578" y2="590.2578"/><polygon fill="#A80036" points="240,586.2578,230,590.2578,240,594.2578,236,590.2578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="236" y="572.1919">Calculate new world</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="619.3906" y2="615.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="619.3906" y2="623.3906"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="218" y1="619.3906" y2="619.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="119" x="93" y="614.3247">GameUpdateState</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="207" y1="673.3281" y2="669.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="217" x2="207" y1="673.3281" y2="677.3281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="76" x2="218" y1="673.3281" y2="673.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="74" x="83" y="668.2622">Commands</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="711.4609" y2="707.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="86" y1="711.4609" y2="715.4609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="76" x2="218" y1="711.4609" y2="711.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="114" x="93" y="706.395">SendGameScores</text><!--MD5=[276e56c5d57b25dbc0b7302935d797cb]
@startuml
!pragma teoz true
 
    participant "Client" as client
    participant "Server" as server
    
    activate client
    activate server

    note over server: Server create the lobby




    == Server wait for clients ==

    server ->> lobby ** : <<create lobby>>
    activate lobby


    note over client: Client join lobby

    client->>server: Join
    server->lobby: AddClient(client)
    lobby- ->server: True
    server- ->>client: JoinAck
    client->>server: Ready
    ...After all client join the lobby...
    server->> lobby : Destory
    destroy lobby
    server- ->>client: GameStart

   
    note over server, client
      Now game starts for all clients
    end note  
    == Game starts ==
    loop Server side
        server->server: Calculate new world
        server->>client: GameUpdateState
      else Client side
        client- ->>server: Commands    
    end group
    server->>client: SendGameScores
@enduml

PlantUML version 1.2020.17beta5(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>